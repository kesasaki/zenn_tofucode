---
title: "[APIæ§‹ç¯‰11] line-chatbotã«ChatGPT APIã‚’çµ„ã¿è¾¼ã‚€"
emoji: "ğŸ˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: 
  - "OpenAI"
  - "OpenAIAPI"
  - "ChatGPT"
  - "gpt-3.5-turbo"
  - "go-openai"
published: true
---
# æ¦‚è¦
[LINEãƒãƒ£ãƒƒãƒˆbotã‚’ä½œæˆã™ã‚‹](https://zenn.dev/tofucode/articles/504bfdd232a0d2)ã§ä½œã£ãŸbotã«ã€ChatGPTã§ã®è¿”ç­”æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã€‚

# SDKå°å…¥
[å‰å›èª¿æŸ»ã§ä¸€ç•ªå…¬å¼ã«è¿‘ã„ã¨åˆ¤æ–­ã—ãŸ](https://zenn.dev/tofucode/articles/14d8226807c30e#sdk(python%2C-node.js%2C-go%E4%BB%96))goç”¨ã®OpenAI APIç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹[sashabaranov/go-openai](https://github.com/sashabaranov/go-openai)ã‚’å°å…¥ã™ã‚‹ã€‚
```
go get github.com/sashabaranov/go-openai
```

# ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
botã‚µãƒ¼ãƒè‡ªä½“ã¯ä»¥ä¸‹ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã€‚
https://zenn.dev/tofucode/articles/504bfdd232a0d2

ä»Šå›è¿”ç­”ã‚’è¡Œã†ç®‡æ‰€ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ãŸã€‚
```go
func getResMessage(message string) (string, error) {
	client := openai.NewClient(os.Getenv("OPENAI_API_KEY"))
	resp, err := client.CreateChatCompletion(
		context.Background(),
		openai.ChatCompletionRequest{
			Model: openai.GPT3Dot5Turbo,
			Messages: []openai.ChatCompletionMessage{
				{
					Role:    openai.ChatMessageRoleUser,
					Content: message,
				},
			},
		},
	)

	if err != nil {
		return "", err
	}

	return resp.Choices[0].Message.Content, nil
}
```

å‚è€ƒ
https://github.com/sashabaranov/go-openai#chatgpt-example-usage


# API key
ä»¥ä¸‹ã‚’å‚è€ƒã«å–å¾—ã—ä¸Šè¨˜ã®ç’°å¢ƒå¤‰æ•°`OPENAI_API_KEY`ã«ã‚»ãƒƒãƒˆã™ã‚‹ã€‚
https://zenn.dev/tofucode/articles/14d8226807c30e#api-keys

# å®Ÿè¡Œ
botã‚µãƒ¼ãƒã®å®Ÿè¡Œã¯ä»¥ä¸‹ã®é€šã‚Šã€‚
https://zenn.dev/tofucode/articles/504bfdd232a0d2

AIã®è¿”ç­”ãŒLINEä¸Šã§ç¢ºèªã§ããŸã€‚
![](/images/80b3342e325408/ss61.jpg =600x)

# æ„Ÿæƒ³
ã“ã“ã¾ã§ã¯ã¨ã£ã¦ã‚‚ãŠæ‰‹è»½ã ã‘ã©ã€ã“ã“ã‹ã‚‰ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãŒé•·ãã†ã¨ã„ã†å°è±¡ã€‚
ã©ã†ä½¿ã„ãŸã„ã‹ã‚’ã‚‚ã£ã¨ç…®è©°ã‚ãŸã„ã€‚

# å‚è€ƒ
ä»Šå›åˆ©ç”¨ã—ãŸSDKã®ã‚µãƒ³ãƒ—ãƒ«
https://github.com/sashabaranov/go-openai/blob/master/examples/chatbot/main.go