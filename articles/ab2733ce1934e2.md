---
title: "Goè¨€èªã§GraphQLã®ã‚µãƒ¼ãƒã‚’ç«‹ã¦ã‚‹"
emoji: "ğŸ“"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: 
 - GraphQL
 - golang
 - gqlgen
 - schema
 - resolver
published: true
---
# æ¦‚è¦
GraphQLã‚’åˆã‚ã¦è§¦ã‚‹ã“ã¨ã«ãªã£ãŸã€‚å‹‰å¼·ã®ãŸã‚ã«ã‚µãƒ¼ãƒã‚’ç«‹ã¦ã¦ã¿ã‚‹ã€‚

# gqlgen
Goã§GraphQLã‚’ä½¿ã†ã®ã«ä¸€ç•ªæœ‰åãªã®ã¯gqlgenã¨ã„ã†ã“ã¨ã§ã€gqlgenã‹ã‚‰å…¥ã‚Œã‚‹ã€‚
https://gqlgen.com/getting-started/
â€»å€‹äººçš„ã«ã¯GraphQL-goã‚‚ã„ã„ã¨æ€ã£ãŸã‘ã©ä¼šç¤¾ãŒgqlgenã ã£ãŸã®ã¨ã€GraphQL-goã¯è‡ªå‹•ç”Ÿæˆä»¥å¤–ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã»ã¼ãªã•ãã†ãªã®ã§ã€‚

:::details ã‚ã‚Œï¼Ÿã“ã£ã¡ã¯Starå¤šã„ãªï¼Ÿ
ã‚ã‚Œã€ã“ã£ã¡ã¯Starå¤šã„ãªï¼Ÿ
https://github.com/graph-gophers/graphql-go

ã“ã‚Œã˜ã‚ƒãªã„GraphQL-goã‚’è¦‹ã¦ã„ãŸã®ã ãŒãƒ»ãƒ»ãƒ»Staræ•°800ãã‚‰ã„ã®ãƒ»ãƒ»ãƒ»ã§ã‚‚ã“ã‚Œã¯ã„ã„ã‹ã‚‚ãªãƒ»ãƒ»ãƒ»
ã§ã‚‚ä»Šå›ã¯ä¼šç¤¾ã«åˆã‚ã›ã¦gqlgenã§ã™ã€‚
:::

## gplgenå°å…¥
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
go mod init example
printf '// +build tools\npackage tools\nimport (_ "github.com/99designs/gqlgen"\n _ "github.com/99designs/gqlgen/graphql/introspection")' | gofmt > tools.go
go mod tidy
go run github.com/99designs/gqlgen init
go mod tidy
go run server.go
```

ã§ããŸã‚‚ã®
```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ gqlgen.yml
â”œâ”€â”€ graph
â”‚Â Â  â”œâ”€â”€ generated.go
â”‚Â Â  â”œâ”€â”€ model
â”‚Â Â  â”‚Â Â  â””â”€â”€ models_gen.go
â”‚Â Â  â”œâ”€â”€ resolver.go
â”‚Â Â  â”œâ”€â”€ schema.graphqls
â”‚Â Â  â””â”€â”€ schema.resolvers.go
â”œâ”€â”€ server.go
â””â”€â”€ tools.go
```

è©³ç´°
| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ»ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ |
| - | - |
| gqlgen.yml | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®ãƒœã‚¿ãƒ³ã€‚ |
| generated | ç”Ÿæˆã•ã‚ŒãŸãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ã¿ã‚’å«ã‚€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ |
| model | ç”Ÿæˆã•ã‚ŒãŸã‹ã©ã†ã‹ã«ã‹ã‹ã‚ã‚‰ãšã€ã™ã¹ã¦ã®ã‚°ãƒ©ãƒ•ãƒ¢ãƒ‡ãƒ«ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€‚schema.graphsã‹ã‚‰è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹? |
| resolver.go | ãƒ«ãƒ¼ãƒˆ ã‚°ãƒ©ãƒ• ãƒªã‚¾ãƒ«ãƒãƒ¼ ã‚¿ã‚¤ãƒ—ã€‚ ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å†ç”Ÿæˆã•ã‚Œãªã„ |
| schema.graphs | ã„ãã¤ã‹ã®ã‚¹ã‚­ãƒ¼ãƒã€‚ã‚¹ã‚­ãƒ¼ãƒã¯graphqlãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†å‰²ã§ãã‚‹ã€‚ |
| schema.resovers.go | schema.graphql ã®ãƒªã‚¾ãƒ«ãƒãƒ¼å®Ÿè£… |
| server.go | ã‚¢ãƒ—ãƒªã¸ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã€‚ å¿…è¦ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã€‚ |

## ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
gqlgen ã¯ã‚¹ã‚­ãƒ¼ãƒå„ªå…ˆã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚
ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã™ã‚‹å‰ã«ã€[GraphQLã‚¹ã‚­ãƒ¼ãƒå®šç¾©è¨€èª](https://graphql.org/learn/schema/)ã‚’ä½¿ç”¨ã—ã¦ API ã‚’è¨˜è¿°ã™ã‚‹ã€‚ 
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ schema.graphqls ã«ä¿å­˜ã•ã‚Œã‚‹ãŒã€å¿…è¦ãªæ•°ã®ç•°ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†å‰²ã§ãã‚‹ã€‚

GraphQLã‚¹ã‚­ãƒ¼ãƒå®šç¾©è¨€èªï¼ˆGraphQLã‚¯ã‚¨ãƒªè¨€èªï¼‰ã«ã¤ã„ã¦ã¯é•·ããªã£ãŸã®ã§ä»¥ä¸‹ã«åˆ‡ã‚Šå‡ºã—ãŸã€‚
https://zenn.dev/tofucode/articles/218b271e8b8704

## ãƒªã‚¾ãƒ«ãƒå®Ÿè£…
ãƒªã‚¾ãƒ«ãƒæ§‹é€ ä½“å®šç¾©
```go:graph/resolver.go
type Resolver struct{
	todos []*model.Todo
}
```

ãƒªã‚¾ãƒ«ãƒå®Ÿè£…ï¼ˆPOSTã•ã‚ŒãŸTODOã‚’ãƒ¡ãƒ¢ãƒªä¸Šã«ä¿å­˜ã™ã‚‹ã‚³ãƒ¼ãƒ‰ï¼‰
```go:graph/schema.resolvers.go
// POST todo
func (r *mutationResolver) CreateTodo(ctx context.Context, input model.NewTodo) (*model.Todo, error) {
  todo := &model.Todo{
	  Text: input.Text,
	  ID:   fmt.Sprintf("T%d", rand.Intn(100)),
	  User: &model.User{ID: input.UserID, Name: "user " + input.UserID},
  }
  r.todos = append(r.todos, todo)
  return todo, nil
}

// GET todo
func (r *queryResolver) Todos(ctx context.Context) ([]*model.Todo, error) {
	return r.todos, nil
}
```

# å®Ÿè¡Œ
```
go mod tidy
go run server.go
```

# å‹•ä½œç¢ºèª
ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:8080/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨è¶…ç¶ºéº—ãªGUIãŒç¾ã‚ŒãŸï¼
![](/images/ab2733ce1934e2/aaa1.jpg =700x)

å·¦ã®æ ã«TODOè¿½åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãªã‚‹æ§‹é€ ä½“ã‚’å…¥ã‚Œã‚‹ã€‚
![](/images/ab2733ce1934e2/aaa2.jpg =700x)

â–¶ï¸ ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨å³ã«çµæœãŒè¿”ã£ã¦ãã‚‹ã€‚
![](/images/ab2733ce1934e2/aaa4.jpg =700x)

ä½•å›ã‹ã‚ŠTODOã‚’è¿½åŠ ã—ãŸå¾Œã§å–å¾—ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã¡ã‚ƒã‚“ã¨å‡ºã¦ãã‚‹ã€‚
![](/images/ab2733ce1934e2/aaa5.jpg =700x)

# æ„Ÿæƒ³
gqlgenã®startã‚µãƒ³ãƒ—ãƒ«ã«ä½•å€‹ã‚‚ã‚ã¹ã“ã¹ãªè¨˜è¿°ãŒè¦‹ã¤ã‹ã‚‹ã€‚
å¤§ä¸ˆå¤«ãªã®ã‹ãƒ»ãƒ»ä¸ä¿¡æ„ŸãŒå‹Ÿã‚‹ã€‚
PRä½œã£ãŸã€‚
https://github.com/99designs/gqlgen/pull/2756
discordã§ã‚‚è¨€ã£ãŸ
https://discord.com/channels/831012771810377778/831012771810377781/1139783831575076914
åˆOSSã‚³ãƒŸãƒƒãƒˆã€‚è¿”äº‹æ¥ã‚‹ã®ã‹ãªã“ã‚Œ


# ä»Šå¾Œ
ä»Šå›ã¯gqlgenã‚’è§¦ã£ãŸãŒã€gqlgenå‘¨ã‚Šã¯ä»¥ä¸‹ã®ã‚‚è§¦ã‚ŠãŸã„ã€‚

| pkg | èª¬æ˜ | ãƒªãƒ³ã‚¯ |
| - | - | - |
| 99designs/gqlgen | GraphQLã‚µãƒ¼ãƒç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | https://github.com/99designs/gqlgen |
| Yamashou/gqlgenc | ä¸Šè¨˜ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ | https://github.com/Yamashou/gqlgenc |
| go-chi/chi | ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | https://github.com/go-chi/chi |
| graph-gophers/dataloader | GraphQLç”¨ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼ã€‚SQLã‚¯ã‚¨ãƒªãŸãã•ã‚“ç™ºè¡Œï¼ˆN+1å•é¡Œï¼‰ã‚’è§£æ±ºã™ã‚‹ã€‚ | https://github.com/graph-gophers/dataloader<br><br>å‚è€ƒ(H.Saki)<br>https://zenn.dev/hsaki/books/golang-graphql/viewer/dataloader#dataloader%E3%81%A8%E3%81%AF |
| vektah/gqlparser/v2 | gqlgenç”¨ã®ãƒ‘ãƒ¼ã‚µãƒ¼ | https://github.com/vektah/gqlparser |

